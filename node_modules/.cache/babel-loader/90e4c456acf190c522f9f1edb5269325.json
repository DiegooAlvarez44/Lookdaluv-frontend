{"ast":null,"code":"import { notification, timerNotification } from \"../helpers/alert\";\nimport { fetchWithoutToken } from \"../helpers/fetch\";\nimport { types } from \"../types/types\";\nexport const startLogin = (username, password) => {\n  return async dispatch => {\n    const response = await fetchWithoutToken('login/', {\n      username,\n      password\n    }, 'POST');\n    const body = await response.json();\n    console.log(body);\n    console.log(response.status);\n\n    if (response.status === 200 || response.status === 201) {\n      // set user info\n      localStorage.setItem('token', body.token);\n      localStorage.setItem('username', body.user.username);\n      localStorage.setItem('email', body.user.email);\n      localStorage.setItem('name', body.user.name);\n      localStorage.setItem('last_name', body.user.last_name);\n      dispatch(login({\n        token: body.token,\n        username: body.user.username\n      }));\n      console.log(\"Success login\");\n    } else {\n      console.log(body.error);\n    }\n  };\n};","map":{"version":3,"sources":["/home/nighthawk/Documents/Amaterasu/lookdaluv-frontend/src/actions/auth.js"],"names":["notification","timerNotification","fetchWithoutToken","types","startLogin","username","password","dispatch","response","body","json","console","log","status","localStorage","setItem","token","user","email","name","last_name","login","error"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,iBAAvB,QAAgD,kBAAhD;AACA,SAASC,iBAAT,QAAkC,kBAAlC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAGA,OAAO,MAAMC,UAAU,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC9C,SAAO,MAAOC,QAAP,IAAqB;AACxB,UAAMC,QAAQ,GAAG,MAAMN,iBAAiB,CAChB,QADgB,EAEhB;AAAEG,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAFgB,EAGhB,MAHgB,CAAxC;AAKA,UAAMG,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACK,MAArB;;AAEA,QAAIL,QAAQ,CAACK,MAAT,KAAoB,GAApB,IAA2BL,QAAQ,CAACK,MAAT,KAAoB,GAAnD,EAAuD;AAEnD;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BN,IAAI,CAACO,KAAnC;AACAF,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCN,IAAI,CAACQ,IAAL,CAAUZ,QAA3C;AACAS,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BN,IAAI,CAACQ,IAAL,CAAUC,KAAxC;AACAJ,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACQ,IAAL,CAAUE,IAAvC;AACAL,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCN,IAAI,CAACQ,IAAL,CAAUG,SAA5C;AAEAb,MAAAA,QAAQ,CAAEc,KAAK,CAAC;AACZL,QAAAA,KAAK,EAAEP,IAAI,CAACO,KADA;AAEZX,QAAAA,QAAQ,EAAEI,IAAI,CAACQ,IAAL,CAAUZ;AAFR,OAAD,CAAP,CAAR;AAKAM,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH,KAfD,MAeK;AACDD,MAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACa,KAAjB;AACH;AACJ,GA7BD;AA8BH,CA/BM","sourcesContent":["import { notification, timerNotification } from \"../helpers/alert\";\nimport { fetchWithoutToken } from \"../helpers/fetch\";\nimport { types } from \"../types/types\";\n\n\nexport const startLogin = (username, password) => {\n    return async( dispatch ) => {\n        const response = await fetchWithoutToken(\n                                'login/',\n                                { username, password },\n                                'POST',\n                            );\n        const body = await response.json();\n\n        console.log(body);\n        console.log(response.status);\n\n        if (response.status === 200 || response.status === 201){\n\n            // set user info\n            localStorage.setItem('token', body.token);\n            localStorage.setItem('username', body.user.username);\n            localStorage.setItem('email', body.user.email);\n            localStorage.setItem('name', body.user.name);\n            localStorage.setItem('last_name', body.user.last_name);\n\n            dispatch( login({\n                token: body.token,\n                username: body.user.username\n            }));\n\n            console.log(\"Success login\");\n        }else{\n            console.log(body.error);\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}