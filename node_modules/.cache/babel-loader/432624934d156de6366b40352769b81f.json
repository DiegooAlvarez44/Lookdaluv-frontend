{"ast":null,"code":"import { fetchWithoutToken } from \"../helpers/fetch\";\nimport { types } from \"../types/types\";\nexport const startLogin = (username, password) => {\n  return async dispatch => {\n    const response = await fetchWithoutToken('login/', {\n      username,\n      password\n    }, 'POST');\n    const body = await response.json();\n    console.log(body);\n    console.log(response.status);\n\n    if (response.status === 200 || response.status === 201) {\n      // set user info\n      localStorage.setItem('token', body.token);\n      localStorage.setItem('username', body.user.username);\n      localStorage.setItem('email', body.user.email);\n      localStorage.setItem('name', body.user.name);\n      localStorage.setItem('last_name', body.user.last_name);\n      dispatch(login({\n        token: body.token,\n        username: body.user.username\n      }));\n      console.log(\"Success login\");\n    } else {\n      console.log('asd');\n      console.log(body.error);\n    }\n  };\n};\nexport const startChecking = () => {\n  return async dispatch => {\n    const response = await fetchWithToken('refresh-token/');\n    const body = await response.json();\n\n    if (response.status === 200 || response.status === 201) {\n      // set user info\n      localStorage.setItem('token', body.token);\n      localStorage.setItem('username', body.user.username);\n      localStorage.setItem('email', body.user.email);\n      localStorage.setItem('name', body.user.name);\n      localStorage.setItem('last_name', body.user.last_name);\n      dispatch(login({\n        token: body.token,\n        username: body.user.username\n      }));\n    } else {\n      dispatch(checkingFinish());\n    }\n  };\n};\n\nconst checkingFinish = () => ({\n  type: types.authCheckingFinish\n});\n\nconst login = user => ({\n  type: types.login,\n  payload: user\n});","map":{"version":3,"sources":["/home/nighthawk/Documents/Amaterasu/lookdaluv-frontend/src/actions/auth.js"],"names":["fetchWithoutToken","types","startLogin","username","password","dispatch","response","body","json","console","log","status","localStorage","setItem","token","user","email","name","last_name","login","error","startChecking","fetchWithToken","checkingFinish","type","authCheckingFinish","payload"],"mappings":"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","sourcesContent":["import { fetchWithoutToken } from \"../helpers/fetch\";\nimport { types } from \"../types/types\";\n\n\nexport const startLogin = (username, password) => {\n    return async( dispatch ) => {\n        const response = await fetchWithoutToken(\n                                'login/',\n                                { username, password },\n                                'POST',\n                            );\n        const body = await response.json();\n\n        console.log(body);\n        console.log(response.status);\n\n        if (response.status === 200 || response.status === 201){\n\n            // set user info\n            localStorage.setItem('token', body.token);\n            localStorage.setItem('username', body.user.username);\n            localStorage.setItem('email', body.user.email);\n            localStorage.setItem('name', body.user.name);\n            localStorage.setItem('last_name', body.user.last_name);\n\n            dispatch( login({\n                token: body.token,\n                username: body.user.username\n            }));\n\n            console.log(\"Success login\");\n        }else{\n            console.log('asd')\n            console.log(body.error);\n        }\n    }\n}\nexport const startChecking = () => {\n\n    return async(dispatch) =>{\n\n        const response = await fetchWithToken( 'refresh-token/' );\n        const body = await response.json();\n        \n\n        if ( response.status === 200 ||  response.status === 201 ){\n\n            // set user info\n            localStorage.setItem('token',body.token);\n            localStorage.setItem('username',body.user.username);\n            localStorage.setItem('email',body.user.email);\n            localStorage.setItem('name',body.user.name);\n            localStorage.setItem('last_name',body.user.last_name);\n\n            dispatch( login({\n                token: body.token,\n                username: body.user.username\n            }) );\n\n        }else{\n            dispatch( checkingFinish() );\n        }\n\n    }\n}\n\nconst checkingFinish = () => ({ type: types.authCheckingFinish })\nconst login = ( user ) => ({\n    type: types.login,\n    payload: user\n})"]},"metadata":{},"sourceType":"module"}